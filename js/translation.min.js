!function(a){a.fn.Translate=function(b){b="undefined"!=typeof b?b:{},this.parameters={project_id:null,language:"en",API_KEY:null,onLoad:null,translationStorageType:sessionStorage,cache_duration:36e5};for(var c in b)b.hasOwnProperty(c)&&this.parameters.hasOwnProperty(c)&&(this.parameters[c]=b[c]);console.log(this.parameters.onLoad),this.language=this.parameters.language,this.translation=[],this.api_base="https://translate.nohponex.gr/",this.call_stack=[],this.missing_keys=[],this.initialize=function(b){b="undefined"!=typeof b?b:this.parameters.language;var c=this,d=this.api_base+"fetch/listing/?id="+this.parameters.project_id+"&language="+b+"&api_key="+this.parameters.API_KEY,e="undefined"!=typeof sessionStorage?sessionStorage.getItem(d):null;if(e||"undefined"==typeof localStorage||(e=localStorage.getItem(d)),this.missing_keys=[],e)try{if(e=JSON.parse(e),!e.date)throw"date not set";var f=new Date-new Date(e.date);f<this.parameters.cache_duration?(this.language=e.language,this.translation=e.translation,console.log("from cache.."),this.parameters.onLoad&&this.parameters.onLoad(this),this.translate_page("html")):(localStorage.removeItem(d),sessionStorage.removeItem(d),e=null)}catch(g){e=null}e||(console.log("from http.."),a.ajax({dataType:"json",url:d,success:function(a){c.parameters.translationStorageType&&c.parameters.translationStorageType.setItem(d,JSON.stringify({language:a.language,translation:a.translation,date:new Date})),c.language=a.language,c.translation=a.translation,c.parameters.onLoad&&c.parameters.onLoad(c),c.translate_page("html")},error:function(a,b,c){try{console.log(a),console.log(a.responseJSON.error),console.log(b),console.log(c)}catch(d){}}}))},this.translate_page=function(b){b="undefined"!=typeof b?b:"body",!this.translation.length;var c=a(b).find("[data-i18]"),d=this;c.each(function(b,c){var e=a(c),f=e.attr("data-i18");if(f){var g=null;e.attr("data-i18-data")&&(g=jQuery.parseJSON(e.attr("data-i18-data")));var h=d.translation_text(f,g);h?e.text(h):e.text()||e.text(f)}});var e=a(b).find("[data-i18-lang]");e.each(function(b,c){var e=a(c);e.text(d.language)})},this.initialize()},a.fn.Translate.prototype.translation_text=function(a,b){b="undefined"!=typeof b?b:null;var c=this.translation[a];if(!c)return this.missing_keys.indexOf(a)<0&&(this.missing_keys.push(a),this.add_key(a)),null;if(b)for(var d in b)b.hasOwnProperty(d)&&(c=c.replace("%"+d+"%",b[d]));return c},a.fn.Translate.prototype.add_key=function(b){var c=this.api_base+"fetch/create/?id="+this.parameters.project_id+"&api_key="+this.parameters.API_KEY+"&key="+b;a.ajax({type:"POST",dataType:"json",url:c,success:function(){},error:function(){}})}}(jQuery);